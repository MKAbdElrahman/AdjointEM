\documentclass{tufte-handout}
\title{Sensitivity Calculations}
\author[mohamedkamal]{Mohamed Kamal Abd Elrahman \\
6 October, Giza,\\ Egypt}

\usepackage{amsmath}  % extended mathematics
\usepackage{graphicx} % allow embedded images
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
\graphicspath{{graphics/}} % set of paths to search for images
\usepackage{amsmath}  % extended mathematics
\usepackage{booktabs} % book-quality tables
\usepackage{units}    % non-stacked fractions and better unit spacing
\usepackage{multicol} % multiple column layout facilities
\usepackage{lipsum}   % filler text
\usepackage{fancyvrb} % extended verbatim environments
\fvset{fontsize=\normalsize}% default font size for fancy-verbatim environments

% Standardize command font styles and environments
\newcommand{\doccmd}[1]{\texttt{\textbackslash#1}}% command name -- adds backslash automatically
\newcommand{\docopt}[1]{\ensuremath{\langle}\textrm{\textit{#1}}\ensuremath{\rangle}}% optional command argument
\newcommand{\docarg}[1]{\textrm{\textit{#1}}}% (required) command argument
\newcommand{\docenv}[1]{\textsf{#1}}% environment name
\newcommand{\docpkg}[1]{\texttt{#1}}% package name
\newcommand{\doccls}[1]{\texttt{#1}}% document class name
\newcommand{\docclsopt}[1]{\texttt{#1}}% document class option name
\newenvironment{docspec}{\begin{quote}\noindent}{\end{quote}}% command specification environment

\begin{document}
	\maketitle
	\begin{abstract}
		\noindent 
	Sensitivities are used as measures of robustness for engineering systems. In many applications, one is interested about the system performance under small variations of a set of design parameters. In inverse device design, sensitivities guides the search within the space spanned by a set of design parameters.  
	\end{abstract}
\section{Problem Formulation}	
 Assuming $\mathbf{G}$	is a vector of design merits $ (G_1[\mathbf{x}], G_2[\mathbf{x}], \dots,G_n[\mathbf{x}]) $, where each component is a scaler function of $m$ design parameters $\mathbf{x}$	$ (x_1,x_2,\dots, x_m)$. The goal is to find the sensitivity of the design merit $G_i$  with respect to the design parameter $x_j$:
	 \begin{equation}
	 S_{ij} = \frac{d G_i}{dx_j}
	 \end{equation}
The entries $S_{ij}$ form the elements of the  $n \times m$  Jacobian matrix $S$ which maps $m$ input parameters to $n$ output merits.   The Jacobian could be seen as a generalization of the slope constant $s$ in $g(x) = s x$, but now is used for multivariate vector functions. The entries of row $S_i = \frac{d G_i}{d \mathbf{x}}$ are the sensitivities of the merit function $G_i$ with respect to all the design parameters. The entries of column $S_j = \frac{d \mathbf{G}}{d x_j}$ are the sensitivities of all the merit functions with respect to the single design parameter $x_j$  
\section{Numerical Differentiation}

\subsection{Finite Difference Method}
In the finite difference approximation the sensitivity column $\frac{d \mathbf{G}}{dx_j}$  is calculated by perturbing the design parameter $x_j$  by a step $\Delta x_j$ and then evaluating the new merits $\mathbf{G}$. The derivative could be approximated by a  forward difference:
\begin{equation}
\frac{d \mathbf{G}}{dx_j} \approx  \frac{\mathbf{G}(\mathbf{x} + \mathbf{\Delta}_j) - \mathbf{G}(\mathbf{x})}{\Delta_j}
\end{equation}
where $\mathbf{\Delta}_j = \Delta_j {\mathbf{\hat{e}}_j}$.
If we have $m$ design parameters, we need to finite difference $m$ times to fill all the columns of the Jacobian $S$. There are several disadvantage to the finite difference approach: 
\begin{itemize}
	\item The objective function  may be very costly to be perturbed and evaluated $m$ times, especially if $m$ is large.
	\item The finite difference suffers from truncation errors as the step size $\Delta_j$  should be very  small. Practically, a very small step will lead to subtractive cancellation errors. So choosing a balanced step size is a problem by itself and we need to solve the this problem $m$ times for each design parameter. 
\end{itemize}

\subsection{Complex Step Method}
\section{Automatic Differentiation}

\subsection{Automatic Forward-Mode Differentiation}
\subsection{Automatic Reverse-Mode Differentiation}

\end{document}